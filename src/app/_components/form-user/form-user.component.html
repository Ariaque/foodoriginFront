<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
      xmlns="http://www.w3.org/1999/html">
<div class="main-div" fxLayoutAlign="space-around center" fxFlexFill>
  <mat-card fxFlex="30">
    <mat-card-title class="title" >Informations générales</mat-card-title>
    <form #infosForm="ngForm" (ngSubmit)="infosForm.resetForm()">
      <div class="form-group col-md-12">
        <label for="description">Description</label>
        <textarea class="form-control" id="description" placeholder="Saisissez la présentation de votre entreprise" lang="fr" style="resize: none" rows="3" [(ngModel)]="description" [ngModelOptions]="{standalone:true}">
        {{this.description}}</textarea>
      </div>
      <div class="form-group col-md-8">
        <label for="nombre_employes">Nombre d'employés </label>
        <input type="number" [min]="1"  class="form-control" id="nombre_employes" [(ngModel)]="nbEmployes" [ngModelOptions]="{standalone:true}" (keypress)="validate($event)">
      </div>
      <div>
        <label for="siteW" class="padding-block">Site web </label>
      </div>
      <div class="input-icone padding-block no-padding">
        <i class="fa fa-globe icone-size" aria-hidden="true"></i>
        <input type="text" class="form-control" id="siteW" placeholder="Url du site web" [(ngModel)]="lienSite" [ngModelOptions]="{standalone:true}">
      </div>
      <div class="form-group col-md-12">
        <mat-checkbox class="example-margin" [(ngModel)]="appartientGroupe" [ngModelOptions]="{standalone:true}">Appartient à un groupe</mat-checkbox>
      </div>
      <div class="form-group col-md-12" *ngIf="appartientGroupe">
        <label for="siret_groupe">Siret du groupe</label>
        <input type="text" class="form-control" id="siret_groupe" placeholder="Siret du groupe" [(ngModel)]="siretGroupe" [maxLength]="14" [ngModelOptions]="{standalone:true}">
        <small *ngIf= "this.siretGroupe.length < 14" class="form-text custom-invalid-feedback" >Le numéro siret doit comporter 14 caractères </small>
      </div>
      <div class="form-group col-md-12">
        <label for = "labels"> Labels </label>
        <mat-select id="labels" name="labels" placeholder="Selectionnez vos labels" [formControl]="listLabel" multiple class="form-control">
          <mat-option *ngFor="let label of this.labels" [value]="label">{{label.libelle}}</mat-option>
        </mat-select>
      </div>
      <div class="form-group col-md-12">
        <label for = "certificat">Certifications </label>
        <mat-select id="certificat" name="certificat" class="form-control" placeholder="Selectionnez vos certifications" [formControl]="listCertif" multiple>
          <mat-option *ngFor="let certif of this.certifications" [value]="certif">{{certif.libelle}}</mat-option>
        </mat-select>
      </div>
    </form>
  </mat-card>
  <mat-card fxFlex="30">
    <form #rsForm="ngForm" (ngSubmit)="rsForm.resetForm()">
      <mat-card-title class="title" >Réseaux sociaux </mat-card-title>
      <div class="input-icone">
        <i class="fa fa-facebook-square icone-size" aria-hidden="true"></i>
        <input type="text" class="form-control" id="facebook" placeholder="Lien Facebook" [(ngModel)]="lienFacebook" [ngModelOptions]="{standalone:true}">
      </div>
      <div class="input-icone">
        <i class="fa fa-twitter-square icone-size" aria-hidden="true"></i>
        <input type="text" class="form-control" id="twitter" placeholder="Lien Twitter" [(ngModel)]="lienTwitter" [ngModelOptions]="{standalone:true}">
      </div>
      <div class="input-icone">
        <i class="fa fa-instagram icone-size" aria-hidden="true"></i>
        <input type="text" class="form-control" id="instagram" placeholder="Lien Instagram" [(ngModel)]="lienInsta" [ngModelOptions]="{standalone:true}">
      </div>
    </form>
  </mat-card>
</div>

<div fxLayoutAlign="space-around center" fxFlexFill>
  <mat-card fxFlex="30">
    <mat-card-title class="title" >Gestion des médias</mat-card-title>
    <h2> Images </h2>
    <div>
      <h4> Sélectionnez une ou plusieurs images : </h4>
      <form #imagesForm="ngForm">
        <input type="file" accept="image/*" multiple (change)="onFileChanged($event)">
        <button (click)="this.onUpload()" class="btn btn-primary" > Valider </button>
      </form>
    </div>
    <div>
      <h2 *ngIf="imagesLink.length > 0"> Images sauvegardées : </h2>
      <div *ngFor="let link of imagesLink">
        <img [src]="link" width="300" height="200">
        <button class="btn btn-danger" (click)="deleteImage(link)"> Supprimer </button>
      </div>
    </div>
    <br>
    <br>
    <div>
      <h2> Vidéos </h2>
      <h4> Saisissez le(s) url(s) des vidéos que vous souhaitez renseigner: </h4>
      <form [formGroup]="urlVideoForm">
        <button type="button" (click)="addUrl()" class="btn btn-primary position-bouton"> Ajouter URL </button>
        <table class="table borderless" formArrayName="urls">
          <tr *ngFor="let url of urls().controls |slice:0:10; let i = index" [formGroupName]="i">
            <td class="center-element">
              <input type="text" formControlName="libelle" class="form-control">
            </td>
            <td class="center-element">
              <button (click)="removeUrl(i)" class="btn btn-danger" > Supprimer </button>
            </td>
          </tr>
        </table>
      </form>
    </div>
  </mat-card>
  <mat-card fxFlex="30">
    <mat-card-title class="title"> Agriculteurs/Fermes Partenaires </mat-card-title>
    <h4> Saisissez le(s) ferme(s)/agriculteur(s) partenaires que vous souhaitez renseigner: </h4>
    <form [formGroup]="fermeForm">
      <button type="button" (click)="addFerme()" class="btn btn-primary" style="float: right"> Ajouter</button>
      <table class="table borderless" formArrayName="fermes">
        <tr *ngFor="let ferme of fermes().controls |slice:0:5; let i = index" [formGroupName]="i">
          <td>
            <div class="form-group col-md-12">
              <label for="nomF"> Nom: </label>
              <input type="text" formControlName="nom" id="nomF" name="nomF" class="form-control">
            </div>
            <div class="form-group col-md-12">
              <label for="presentationF"> Presentation: </label>
             <textarea class="form-control" placeholder="Saisissez la description de la ferme/l'agriculteur" lang="fr" style="resize: none" rows="2" cols="45" type="text" formControlName="presentation" id="presentationF" name="presentationF"></textarea>
            </div>
            <button (click)="removeFerme(i)" class="btn btn-danger position-bouton"> Supprimer </button>
          </td>
        </tr>
      </table>
    </form>
  </mat-card>
</div>

<div fxLayoutAlign="space-around center" fxFlexFill>
  <mat-card fxFlex="30">
    <mat-card-title class="title"> Denrées animales utilisées </mat-card-title>
    <h4> Saisissez les denrées animales utilisées et leurs origines </h4>
    <form [formGroup]="denreeForm">
      <button type="button" (click)="addDenree()" class="btn btn-primary" style="float: right"> Ajouter</button>
      <table class="table borderless" formArrayName="denrees">
        <tr *ngFor="let denree of denrees().controls |slice:0:10; let i = index" [formGroupName]="i">
          <td>
              <label for="nomD"> Type de denrée: </label>
              <input type="text" formControlName="nom" id="nomD" name="nomD" class="form-control">
          </td>
          <td>
              <label for="origineD"> Origine de la denrée: </label>
              <input type="text" formControlName="origine" id="origineD" name="origineD" class="form-control">
          </td>
          <td>
            <button (click)="removeDenree(i)" class="btn btn-danger" style="margin-top: 25px"> Supprimer </button>
          </td>
        </tr>
      </table>
    </form>
  </mat-card>
  <mat-card fxFlex="30" style="background: none; border-block: none">
     <button mat-raised-button type="submit" (click)="saveInfos()" color="warn" mat-stroked-button>Valider</button>
  </mat-card>
</div>
